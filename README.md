# TheresMore Modifier - Gemini 增强版

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Greasy Fork Installs](https://img.shields.io/greasyfork/i/541621.svg)](https://greasyfork.org/zh-CN/scripts/541621-theresmore-modifier-gemini-enhanced-edition)

这是一个为网页游戏 **[TheresMore](https://theresmoregame.g8hh.com.cn/)** 设计的强大功能增强脚本。

---

### 项目背景

本项目是在 **Keith** 的经典作品 **[TheresMore Modifier（修改器）](https://greasyfork.org/zh-CN/scripts/450000-theresmore-modifier)** 的基础上，由 **VincentHDLee** 与 **Gemini** 协作，进行深度重构与功能强化的二次创作版本。

我们保留了原版便捷的作弊功能，并在此之上构建了一套全新的、高度智能化的自动任务系统。

### 功能一览

* ✅ **无限资源**: 一键开关，持续将所有资源（包括“辉烬”）补充至天文数字。
* ✅ **瞬间完成**: 通过直接修改游戏任务耗时，实现战斗、侦查等所有军队行动的“瞬时完成”，效果稳定无卡顿。
* ✅ **智能任务调度器**: 独创的“任务租约”调度系统，可同时开启多个自动化功能（建造、研究、魔法）而不会互相干扰，彻底解决“标签页战争”问题。
* ✅ **高效的自动建造**:
    * 支持**批量建造**，可在同一子页面连续执行多次建造任务，极大提升效率。
    * 支持**地点选择**，可通过复选框自由控制脚本在“城市”、“定居点”、“深渊”的工作范围。
    * 内置食物预警，保障经济安全。
* ✅ **精准的自动研究 & 祈祷**:
    * 拥有**三层智能审查系统**，可精准识别并搁置剧情分支选项，同时安全地研发系列科技。
    * 内置“危险研究”黑名单，主动规避任何可能导致游戏意外结束的操作。
* ✅ **完善的自动魔法**: 支持在“咒语”和“祈祷”分页间自动轮转，执行对应任务。
* ✅ **健壮的弹窗处理**: 可自动识别并关闭绝大多数游戏内弹窗，确保自动化流程不被中断。

### 安装方法

1.  首先，您需要在浏览器上安装一个用户脚本管理器，推荐 **[Tampermonkey](https://www.tampermonkey.net/)**。
2.  然后，点击下方的链接进行安装：
    * **[从 Greasy Fork 安装](https://greasyfork.org/zh-CN/scripts/541621-theresmore-modifier-gemini-enhanced-edition)**

### 架构简介 (代码情况)

为了解决多任务并行时的冲突问题，并实现智能决策，本脚本的核心架构经过了精心设计：

1.  **任务租约调度器 (Task Lease Scheduler)**
    脚本并未采用简单的多计时器并行，而是由一个中央调度器统一管理所有自动化任务（建造、研究、魔法）。当一个任务（如“建造”）执行了有效操作后，它会获得一个持续数秒的“独占租约”。在租约期内，调度器会锁定并只允许该任务继续执行，从而彻底避免了多任务争抢UI焦点导致的页面反复切换问题。

2.  **三层智能审查系统 (Three-Layer Review System)**
    为了让“自动研究”和“自动祈祷”能够安全地处理复杂的剧情分支，我们实现了一套三层过滤系统：
    * **第一层：安全主题白名单**：脚本内置了一个“安全主题词”列表（如“精金”、“秘银”）。任何以此开头的项目都会被无条件认为是安全的，并被优先处理。
    * **第二层：已知选择组黑名单**：脚本维护了一个包含所有已知剧情分支的列表（如 `['赢得民心', '说服贵族']`）。当一个“选择组”内的多个选项同时出现时，它们将被精准搁置。
    * **第三层：通用重复字符审查**：对于所有未被以上规则覆盖的未知选项，脚本会启用最后的安全网——比较它们之间是否存在共享字符，以捕捉新的、未知的剧情分支。

### 当前的短板 & 如何贡献

**我们最大的挑战**，也是脚本唯一的“短板”，就是其决策智能高度依赖于我们手动维护的“已知选择组”黑名单。

这意味着，如果游戏未来更新，出现了我们列表之外的、全新的剧情分支选项，脚本可能无法识别，从而存在搁置过多或错误点击的风险。

**欢迎您做出贡献！** 如果您在游戏中发现了脚本未能正确处理的新的分支选项，请通过本项目的 **[GitHub Issues](https://github.com/VincentHDLee/TheresMore-Modifier/issues)** 页面告诉我们。

您的每一次反馈，都能让这个脚本的“知识库”更完善，让它的决策更精准！

### 致谢

* 感谢 **Keith** 创作了功能强大的原版脚本，为本项目奠定了坚实的基础。
* 感谢所有为此项目提供反馈和测试的玩家。

### 许可证

本项目采用 [MIT License](https://opensource.org/licenses/MIT)。